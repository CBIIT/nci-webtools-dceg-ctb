{% load static %}
{% load custom_tags %}

{% is_allowed user as has_access %}
<div class="fixed-top">
    <nav id="ctb-main-navbar" class="navbar navbar-expand-lg shadow navbar-light" aria-label="Main navigation">
        <div class="container">
            <a class="navbar-brand" href="{% url 'landing_page' %}"><img class="me-2"
                                                                         src="{% static 'img/ctb-nci-logo.svg' %}"
                                                                         height="50px" alt="nci-logo"></a>
            <button class="navbar-toggler p-0 border-0" type="button" id="navbarSideCollapse" data-bs-toggle="collapse"
                    data-bs-target="#ctb-collapsible-navbar"
                    aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="navbar-collapse collapse" id="ctb-collapsible-navbar">
                <ul class="navbar-nav col-11">
                    <li class="nav-item">
                        <a class="nav-link {% if 'about/' in request.path %} active {% endif %}"
                           href="{% url 'about' %}">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if 'research/' in request.path %} active {% endif %}"
                           href="{% url 'research' %}">Research and Data Access</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if 'search_facility' in request.path %} active {% endif %}"
                           aria-current="page"
                           href="{% url 'dashboard' %}">
                            Search the Biorepository
                        </a>
                    </li>
                </ul>
                <ul class="navbar-nav col-1">
                    {% if user.is_authenticated %}
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle {% if 'users/' in request.path or 'account' in request.path %} active {% endif %}"
                               data-bs-toggle="dropdown" href="#" role="button"
                               aria-expanded="false"><i class="fa-solid fa-user"></i><span
                                    class="sr-only">User Menu</span></a>
                            <ul class="dropdown-menu">
                                <li>
                                    <a href="{% url 'user_detail' user.id %}"
                                       class="dropdown-item"
                                       title="My Profile">My Profile
                                    </a>
                                </li>
                                <li>
                                    <a href="#logout-modal" class="dropdown-item" data-bs-toggle="modal"
                                       data-bs-target="#logout-modal"
                                       title="Sign Out">Sign Out <i class="fa fa-solid fa-sign-out"></i>
                                    </a>
                                </li>
                            </ul>
                        </li>
                    {% else %}
                        <li class="nav-item">
                            <a class="nav-link {% if 'login/' in request.path %} active {% endif %}"
                               href="{% url 'two_factor:login' %}">
                                <i class="fas fa-sign-in-alt"></i><span class="sr-only">Sign-In</span>
                            </a>
                        </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>
</div>
{% if 'search_facility/' in request.path %}
    <div id="ctb-secondary-navbar" class="d-flex justify-content-center">
        <div class="col-lg-9 pt-2">
            <nav class="nav navbar-ctb" aria-label="Secondary navigation">
                {% if user.is_verified %}
                    <a class="nav-link {% if 'dashboard/' in request.path %} active {% endif %}"
                       href="{% url 'dashboard' %}">
                        Dashboard
                    </a>
                    <a class="nav-link {% if 'search_samples/' in request.path %} active {% endif %}"
                       href="{% url 'search_tissue_samples' %}">Search Samples</a>
                    <a class="nav-link {% if 'saved_searches/' in request.path %} active {% endif %}"
                       href="{% url 'saved_searches' %}">My Saved Searches</a>

                {% endif %}
            </nav>

        </div>
    </div>
{% endif %}
